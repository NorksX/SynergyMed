<!-- src/main/resources/templates/company-form.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title th:text="${mode=='create' ? 'Креирај компанија' : 'Уреди компанија'}">Компанија</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Shared header styles first -->
    <th:block th:replace="fragments/header :: headerStyles"></th:block>

    <style>
        :root { --teal-1:#20b2aa; --teal-2:#48d1cc; --muted:#6c757d; --shadow:0 20px 40px rgba(0,0,0,.1); }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif; min-height:100vh; background:linear-gradient(135deg,#a4ecba 0%,#fefeff 100%); }

        /* Page-level override: make header look like the “medicines” page */
        .site-header{
            position: sticky;
            top: 0; left: 0; right: 0;
            width: 100%;
            z-index: 1000;
            background: #fff !important;           /* replace gradient with solid white */
            box-shadow: 0 2px 10px rgba(0,0,0,.1); /* consistent subtle shadow */
            border-radius: 0 !important;           /* remove rounding on all corners */
            border-top-left-radius: 0 !important;
            border-top-right-radius: 0 !important;
            border-bottom-left-radius: 0 !important;
            border-bottom-right-radius: 0 !important;
        }

        .wrap{ width:100%; max-width:720px; margin:40px auto; background:#fff; border-radius:20px; overflow:hidden; box-shadow:var(--shadow); }
        .head{ background:linear-gradient(135deg,var(--teal-1),var(--teal-2)); color:#fff; padding:26px 24px; }
        .body{ padding:26px 24px; }
        .row{ display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:16px; }
        .row-1{ display:grid; grid-template-columns:1fr; gap:16px; margin-bottom:6px; }
        label{ display:block; margin-bottom:8px; color:#334155; font-weight:600; font-size:.95rem; }
        input,textarea{ width:100%; padding:14px 12px; border:2px solid #e6ebf0; border-radius:12px; background:#f8fafc; font-size:1rem; }
        textarea{ min-height:110px; }
        .roles{ display:flex; flex-wrap:wrap; gap:10px; margin-top:6px; }
        .chip{ display:inline-flex; align-items:center; gap:6px; border:2px solid rgba(32,178,170,.25); border-radius:999px; padding:8px 12px; background:#fff; }
        .actions{ display:flex; gap:12px; padding:0 24px 24px 24px; }
        .btn{ border:none; padding:12px 16px; border-radius:12px; cursor:pointer; font-weight:700; }
        .btn-primary{ background:linear-gradient(135deg,var(--teal-1),var(--teal-2)); color:#fff; }
        .btn-secondary{ background:#fff; border:2px solid rgba(32,178,170,.25); }
    </style>
</head>
<body>

<!-- Pass the active page name so the nav highlights “Компании” -->
<th:block th:replace="fragments/header :: siteHeader('Компании')"></th:block>

<div class="wrap">
    <div class="head">
        <h2 th:text="${mode=='create' ? 'Креирај компанија' : 'Уреди компанија'}">Компанија</h2>
    </div>

    <div class="body">
        <form th:action="${mode=='create'} ? @{/admin/companies} : @{/admin/companies/{id}/update(id=${company.id})}" method="post">
            <div class="row">
                <div>
                    <label>Име на компанија</label>
                    <input type="text" name="companyName" th:value="${mode=='edit' ? company.companyName : ''}" required>
                </div>
                <div>
                    <label>Регистрациски број</label>
                    <input type="text" name="registrationNumber" th:value="${mode=='edit' ? company.registrationNumber : ''}" required>
                </div>
            </div>

            <div class="row-1">
                <div>
                    <label>Опис</label>
                    <textarea name="description" th:text="${mode=='edit' ? company.description : ''}"></textarea>
                </div>
            </div>

            <div class="row-1">
                <div>
                    <label>Тип на компанија</label>
                    <div class="roles">
                        <label class="chip" th:each="rt : ${roleTypes}">
                            <input type="checkbox" name="roles" th:value="${rt}"
                                   th:checked="${selectedRoles != null and selectedRoles.contains(rt)}">
                            <span th:text="${rt}">УЛОГА</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button class="btn btn-primary" type="submit" th:text="${mode=='create' ? 'Креирај' : 'Измени'}">Зачувај</button>
                <a class="btn btn-secondary" th:href="@{/admin/companies}">Откажи</a>
            </div>
        </form>
    </div>
</div>

<th:block th:replace="fragments/header :: headerScripts"></th:block>
</body>
</html>
