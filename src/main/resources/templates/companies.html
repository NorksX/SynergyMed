<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>SynergyMed â€“ Companies</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Header styles -->
    <th:block th:replace="fragments/header :: headerStyles"></th:block>

    <style>
        :root{--teal-1:#20b2aa;--teal-2:#48d1cc;--bg:#fefeff;--card:#ffffff;--muted:#6c757d;--text:#1f2937;--shadow:0 20px 40px rgba(0,0,0,0.10);--shadow-sm:0 6px 18px rgba(0,0,0,0.08)}
        *{margin:0;padding:0;box-sizing:border-box}

        /* Stack header above centered content; remove body padding so header can touch edges */
        body{
            font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
            min-height:100vh;
            background:linear-gradient(135deg,#a4ecba 0%,#fefeff 100%);
            color:var(--text);
            display:flex; flex-direction:column; align-items:center;
        }

        /* Full-width header overrides */
        .site-header{
            position: sticky; top:0; left:0; right:0; width:100%;
            border-radius:0; margin:0; z-index:1000;
        }

        /* Centered page wrapper now holds the padding */
        .page{width:100%;max-width:1200px; padding:28px; margin:0 auto}

        .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;background:linear-gradient(135deg,var(--teal-1),var(--teal-2));color:#fff;padding:20px 24px;border-radius:20px;box-shadow:var(--shadow)}
        .btn{display:inline-block;border:none;cursor:pointer;text-decoration:none;padding:12px 16px;border-radius:12px;font-weight:600;letter-spacing:.5px;transition:.2s ease}
        .btn-primary{background:linear-gradient(135deg,var(--teal-1),var(--teal-2));color:#fff;box-shadow:0 10px 20px rgba(32,178,170,.25)}
        .btn-primary:hover{transform:translateY(-2px)}
        .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:22px}
        .card{background:var(--card);border-radius:18px;overflow:hidden;box-shadow:var(--shadow-sm);display:flex;flex-direction:column}
        .content{padding:14px 16px 18px}
        .title{font-weight:700;margin:6px 0 2px}
        .muted{color:var(--muted);font-size:.92rem}
        .row{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
        .badge{display:inline-block;background:rgba(32,178,170,.12);color:#137a74;padding:4px 8px;border-radius:999px;font-size:.80rem;font-weight:700;margin-right:6px}
        .btn-outline{background:#fff;border:2px solid rgba(32,178,170,.25);color:#20b2aa;padding:8px 12px;border-radius:10px;text-decoration:none;font-weight:600;transition:.2s ease}
        .btn-outline:hover{border-color:#20b2aa;box-shadow:0 6px 14px rgba(32,178,170,.18)}
        @media (max-width:560px){.page{padding:16px}.header{padding:16px}}
    </style>
</head>
<body>

<!-- Full-width global header OUTSIDE the .page container -->
<th:block th:replace="fragments/header :: siteHeader('companies', ${username})"></th:block>

<div class="page">
    <div class="header">
        <h2>Companies</h2>
        <a class="btn btn-primary" th:href="@{/companies/new}">Create</a>
    </div>

    <div class="grid">
        <div class="card" th:each="c : ${companies}">
            <div class="content">
                <div class="title" th:text="${c.companyName}">Company Name</div>
                <div class="muted" th:text="${'Reg. No: ' + c.registrationNumber}">Reg No</div>
                <div class="muted" th:text="${c.description}">Description</div>

                <div style="margin-top:8px;">
                    <span class="badge" th:each="r : ${rolesByCompany[c.id]}" th:text="${r}">ROLE</span>
                </div>

                <div class="row" style="margin-top:12px;">
                    <div>
                        <a class="btn-outline" th:href="@{/companies/{id}/edit(id=${c.id})}" style="margin-right:8px;">Edit</a>
                    </div>
                    <form th:action="@{/companies/{id}/delete(id=${c.id})}" method="post" style="display:inline">
                        <button type="submit" class="btn-outline" style="color:#b3261e;border-color:#f0caca">Delete</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Header dropdown script -->
<th:block th:replace="fragments/header :: headerScripts"></th:block>
</body>
</html>
